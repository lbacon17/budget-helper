{% extends "base.html" %}

{% block content %}

<div class="expenses-container center-align">
    {% if expenses %}
        {% for expense in expenses %}
            <div class="row">
                <div class="col s6 m3">
                    <span>{{ expense.date }}</span>
                </div>
                <div class="col s6 m3">
                    <span>{{ expense.category_name }}</span>
                </div>
                <div class="col s6 m3">
                    <span>{{ expense.expense_description }}</span>
                </div>
                <div class="col s6 m3">
                    <span>GBP {{ expense.expense_amount }}</span>
                </div>
            </div>
        {% endfor %}
        <div class="row">
            <div class="col s12">
                {% set totals = [] %}
                {% for expense in expenses %}
                    {% set amount = expense.expense_amount | float %}
                    {% if totals.append(amount) %}
                        <span>{{ totals }}</span>
                    {% endif %}
                {% endfor %}
                <span>{{ totals | sum }}</span>
            </div>
        </div>
    {% else %}
        <div class="row">
            <div class="col s12">
                <h4>You have no expenses yet.</h4>
            </div>
        </div>
        <div class="row">
            <div class="col s12">
                <a href="{{ url_for('new_expense') }}" class="btn-large green">Create Expense</a>
            </div>
        </div>
    {% endif %}
</div>

{% endblock %}